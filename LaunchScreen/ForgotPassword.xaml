<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="ExpenseTracker.ForgotPasswordPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Reset Password"
             BackgroundColor="#F8F9FA"
             NavigationPage.HasNavigationBar="False">

    <Grid RowDefinitions="Auto,*" Padding="0">
        
        <!-- HEADER GRADIENT -->
        <Grid Grid.Row="0" Padding="0" HeightRequest="140">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#6366F1" Offset="0.0"/>
                    <GradientStop Color="#8B5CF6" Offset="1.0"/>
                </LinearGradientBrush>
            </Grid.Background>
            
            <VerticalStackLayout Padding="20" Spacing="10" VerticalOptions="End">
                <Label Text="Reset Password"
                       FontSize="28"
                       FontAttributes="Bold"
                       TextColor="White"/>
                <Label Text="We'll help you regain access"
                       FontSize="14"
                       TextColor="White"
                       Opacity="0.8"/>
            </VerticalStackLayout>
        </Grid>

        <!-- FORM CONTENT -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20" Spacing="16">

                <!-- INFO MESSAGE -->
                <Frame BackgroundColor="#EEF2FF"
                       BorderColor="#C7D2FE"
                       CornerRadius="8"
                       Padding="12">
                    <Label Text="Enter your email address and we'll send you instructions to reset your password."
                           FontSize="13"
                           TextColor="#4F46E5"
                           LineBreakMode="WordWrap"/>
                </Frame>

                <!-- EMAIL SECTION -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Email Address"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="#1F2937"/>
                    <Entry x:Name="EmailEntry"
                           Placeholder="Email Address"
                           PlaceholderColor="#9CA3AF"
                           BackgroundColor="White"
                           TextColor="#1F2937"
                           Keyboard="Email"
                           BorderColor="#E5E7EB"
                           CornerRadius="8"
                           Padding="12"
                           ClearButtonVisibility="Never"/>
                </VerticalStackLayout>

                <!-- RESET BUTTON WITH LOADING INDICATOR -->
                <Grid ColumnDefinitions="*" HeightRequest="50" Margin="0,10,0,0">
                    <Button x:Name="ResetButton"
                            Text="Send Reset Link"
                            BackgroundColor="#6366F1"
                            TextColor="White"
                            FontSize="16"
                            FontAttributes="Bold"
                            CornerRadius="8"
                            Padding="0"
                            Clicked="OnSendResetClicked"/>
                    <ActivityIndicator x:Name="LoadingIndicator"
                                       IsRunning="False"
                                       IsVisible="False"
                                       Color="White"
                                       Scale="1.2"/>
                </Grid>

                <!-- BACK TO LOGIN -->
                <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="4" Margin="0,30,0,0">
                    <Label Text="Remember your password?"
                           FontSize="13"
                           TextColor="#6B7280"/>
                    <Label Text="Sign In"
                           FontSize="13"
                           TextColor="#6366F1"
                           FontAttributes="Bold">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnBackToLoginTapped"/>
                        </Label.GestureRecognizers>
                    </Label>
                </StackLayout>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>

</ContentPage>
